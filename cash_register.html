<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">	
<style type="text/css">
button.fee-key, button.payment-key, button.command-key, button.auxiliary-key, button.dept-key, button.tax-key
{
	width:60px;
	height:60px;
}
button.dept-key
{
	font-size:10px;
	background-color:white;
}
button.white-bg
{
	background-color:white;
}
button.number-key
{
	width:40px;
	height:40px;
}
button.total-key
{
	width:120px;
	height:60px;
	background-color:red;
	color:white;
}
button.clerk-id-key
{
	width:60px;
	height:60px;
	background-color:orange;
	color:white
}

#receipt 
{
	background-color:white;
	height:300px;
	width:210px;
	font-family:monospace;
	float:left;
	overflow-y:scroll;
}
p.receipt-header {text-align:center;}
p.receipt-clerkin {text-align:left;}
p.receipt-items {text-align:justify;}
p.receipt-totals {text-align:justify}
p.receipt-timestamp {text-align:right;}
p.receipt-footer {text-align:center;}

#customer-display-upper
{
	height:70px;
	width:500px;
	color:green; 
	background-color:black; 
	font-size:300%; 
	font-family:courier,monospace; 
	white-space:nowrap; 
	overflow:auto;
	float:left;
	text-align:left;
}
#customer-display-lower
{
	height:70px;
	width:500px;
	color:green; 
	background-color:black; 
	font-size:300%; 
	font-family:courier,monospace; 
	white-space:nowrap; 
	overflow:auto;
	float:right;
	text-align:right;
}
</style>
<script language="JavaScript" type="text/javascript">
//	Program: ROYAL alpha 601sc cash management system emulator 
//	Author: Nathaniel Beaver
//	Date: February 10, 2011
//	Begun in September 2010 and worked on sporadically since then, this 
// cash register emulator is my first web application. Those familiar 
// with Javascript will note the total lack of object-oriented design 
// and egregious use of global variables, which is a by-product of my
// familiarity with C. This was largely written using Geany and Firebug
// on Ubuntu 10.04.
var EmployeeName = new Array();
EmployeeName[1]="ZAPHOD B";
EmployeeName[2]="FORD P";
EmployeeName[3]="TRICIA M";
EmployeeName[4]="ARTHUR D";

var EmployeePin = new Array();
EmployeePin[1]="123";
EmployeePin[2]="456";
EmployeePin[3]="789";
EmployeePin[4]="042";

var TotalCost = 0;
var Tax = 0;
var Qty = 0;
var ErrorState = false;
var EnteringPin = false;
var ClerkedIn = false;
var ClerkId = 0;
var EnteredPin = "";
var AcceptableKeyIds = new Array();
var NumKeyIds = new Array("1","2","3","4","5","6","7","8","9","0","00");
var ItemKeyIds = new Array('PRINTING','26" LAMINA','12" LAMINA','PASSPORT','FAB 6 SURC','LATE FEE','CD DUPLICA','DVD DUPLIC','DVD AUTHOR','PREFLIGHT','USAGE FEES','POWERTABS','DVD MENU','COFFEE');

var ItemPrice = new Array();
ItemPrice['PRINTING']='0.50';
ItemPrice['26" LAMINA']=''; //todo:find this out
ItemPrice['12" LAMINA']='0.15';
ItemPrice['PASSPORT']='5.00';
ItemPrice['FAB 6 SURC']='25.00';
ItemPrice['LATE FEE']='0.12';
ItemPrice['CD DUPLICA']='4.00';
ItemPrice['DVD DUPLIC']='5.00';
ItemPrice['DVD AUTHOR']='50.00';
ItemPrice['PREFLIGHT']='10.00';
ItemPrice['USAGE FEES']='0.14';
ItemPrice['POWERTABS']='1.00';
ItemPrice['DVD MENU']='30.00';
ItemPrice['COFFEE']='0.50';

//<p class="receipt-items">PASSPORT *5.00T1</p>
var ReceiptString = new Array();
ReceiptString['PRINTING']='PRINTING *0.50T1';
ReceiptString['26" LAMINA']=''; //todo:find this out
ReceiptString['12" LAMINA']='12" LAMINATE *0.15T1';
ReceiptString['PASSPORT']='PASSPORT *5.00T1';
ReceiptString['FAB 6 SURC']='FAB 6 SURCHG *25.00T1';
ReceiptString['LATE FEE']='LATE FEE *0.12  ';
ReceiptString['CD DUPLICA']='CD DUPLICAT *4.00T1';
ReceiptString['DVD DUPLIC']='DVD DUPLICAT *4.00T1';
ReceiptString['DVD AUTHOR']='DVD AUTHORIN *50.00T1';
ReceiptString['PREFLIGHT']='PREFLIGHT *10.00T1';
ReceiptString['USAGE FEES']='USAGE FEES *0.14  ';
ReceiptString['POWERTABS']='POWERTABS *1.00T1';
ReceiptString['DVD MENU']='DVD MENU *30.00T1';
ReceiptString['COFFEE']='COFFEE *0.50  ';

function PressKey(KeyId, KeyNum) {
	if (KeyNum === undefined) {//KeyNum is optional, since only dept-keys have them
		KeyNum = "";
	}
	if (ErrorState === true) {
	    if (KeyId == "Clear") {
		    ErrorState = false;
			StopErrorTone();
			return true;
		}
		else {
		return false;
		}
	}
//	if ( ! InArray(KeyId, AcceptableKeyIds)) {
//		ErrorState = true;
//		AppendDisplay('customer-display-upper', 'ERROR');
//		PlayErrorTone();
//		return false;
//	}
	if (InArray(KeyId, NumKeyIds)) {//numerical keypad
		if (EnteringPin === true) {
			EnteredPin += KeyId;
			AppendDisplay('customer-display-lower', '*');
		}
		else {
			AppendDisplay('customer-display-lower', KeyId);
		}
		return true;
	}
	if (ClerkedIn === true && InArray(KeyId, ItemKeyIds)) {//item keys, aka dept keys
		Qty = 1;//todo:make this generic
		TotalCost += parseFloat(ItemPrice[KeyId]) * Qty; //todo:fix this for more quantities and things like printing
		SetDisplay('customer-display-upper', KeyId);
		SetDisplay('customer-display-lower', KeyNum+ "      "+ItemPrice[KeyId]);
		AppendDisplay('receipt', '<p class="receipt-items">'+ReceiptString[KeyId]+'</p>');
		return true;
		}
	switch(KeyId) {//todo: set acceptable key ids
		case "QTY" :
			//todo: look at the customer-display-lower
			break;
		case "Clear" :
			ClearDisplay('customer-display-upper');
			ClearDisplay('customer-display-lower');
			//todo: clear the display, since error should have been caught before this
			break;
		case "Void" :
			//todo: figure out this whole business
			break;
		case "Feed" :
			//todo: add a <br> to the receipt
			break;
		case "Clerk ID" :
			ClerkId = parseInt(document.getElementById('customer-display-lower').innerHTML);
			ClearDisplay('customer-display-upper');
			EnteringPin = true;
			break;
		case "PIN/CHECK" :
			if (EnteringPin === true && ClerkedIn === false && (EnteredPin == EmployeePin[ClerkId])) {
				SetDisplay('customer-display-upper', EmployeeName[ClerkId]);
				SetDisplay('customer-display-lower', ClerkId + "      000"); //todo:fix this spacing kludge
				PrintReceiptHeader(EmployeeName[ClerkId]);
				ClerkedIn = true;
			}
			else {
			alert("Bad Pin");
			}
			break;
		case "Subtotal" :
			//print out the current total; do nothing to receipt
			//SUBTTL
			//.S 106.91
			break;
		case "PAY CASH" :
			break;
		default :
			//Some other key--don't worry about it?
			return true;
	}
}
function InArray(Element, Array) {
    for (var i in Array) {
		if (Array[i] == Element) {
		    return true;
		}
	}
	return false;
}	
function AppendDisplay(DisplayName, HTML) {
    document.getElementById(DisplayName).innerHTML += HTML;
}
function SetDisplay(DisplayName, HTML) {
    document.getElementById(DisplayName).innerHTML = HTML;
}
function ClearDisplay(DisplayName) {
    document.getElementById(DisplayName).innerHTML = "";
}
function PrintReceiptHeader(EmployeeName) {
	AppendDisplay('receipt', '<p class="receipt-header">MEDIA SERVICES<br>Olin Hall room 032<br>507 933 7459<br>mediaservices@gac.edu</p>');
	d = new Date();
	DateStr = d.getMonth() + "-" + d.getDate() + "-" + d.getFullYear();
	AppendDisplay('receipt', '<p class="receipt-clerkin">'+DateStr+'&nbsp;&nbsp;&nbsp;&nbsp;MC #:0000<br>'+EmployeeName+'</p>');
}

function PlayErrorTone() {
    document.getElementById('ErrorTone').play();
}
function StopErrorTone() {
    document.getElementById('ErrorTone').stop();
}

function play_single_sound() {
    document.getElementById('audiotag1').play();
}
function stop_single_sound() {
    document.getElementById('audiotag1').stop();
}

</script> 
<title>Media Services Cash Register Emulator v0.31</title>
</head>
<body>
<noscript>This emulator uses Javascript. Your browser either doesn't support Javascript or you have it turned off.</noscript>
	<audio id="audiotag1" autobuffer="autobuffer"><source src="cash_reg_5sec_error_tone_3kHz.wav" type="audio/wav"></audio>

	<p>
		<a href="javascript:play_single_sound();">Play 5-sec sound on single channel</a>
		<a href="javascript:stop_single_sound();">Stop 5-sec sound on single channel</a>
	</p>

<table id="CashRegisterDisplayTable">
	<form name="CashRegisterDisplay">
	<tr>
		<td> 
			<div id="receipt">
			<p class="receipt-header">MEDIA SERVICES<br>Olin Hall room 032<br>507 933 7459<br>mediaservices@gac.edu</p>
			<p class="receipt-clerkin">01-01-2011&nbsp;&nbsp;&nbsp;&nbsp;MC #:0000<br>ZAPHOD B</p>
			<p class="receipt-items">PASSPORT *5.00T1</p>
			<p class="receipt-items">PASSPORT *5.00T1</p>
			<p class="receipt-totals">------------------------<br><b>TOTAL</b>*5.34<br>AMOUNT *6.00<br>CHANGE *0.66</p>
			<p class="receipt-timestamp">PM 3-31   ****</p>
			<p class="receipt-footer">Thank you for visiting! <br>Please let us know how <br>we are doing.</p>
			</div>
		</td>
		<td>
			<div id="customer-display-upper">HELLO</div>
			<br>
			<div id="customer-display-lower"></div>
		</td>
	</tr>
	</form>
</table>
<table id="CashRegisterKeyboard" border="1" align=left>
	<tr>
		<td></td>
		<td>
			<table id="AuxiliaryKeys" border="1" align=center>
				<tr>
					<td><button class="auxiliary-key white-bg">Feed</button></td>
					<td><button class="clerk-id-key" onClick="PressKey('Clerk ID')">Clerk<br>ID</button></td>
					<td><button class="auxiliary-key">Shift</button></td>
				</tr>
			</table>
		</td>
		<td>
			<table id="FeeKeys" border="1">
				<tr>
					<td><button class="fee-key">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E/Y<br>FAB6<br>Surcharg</button></td>
					<td><button class="fee-key">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;J<br>Preflight<br>Fee</button></td>
					<td><button class="fee-key">15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;O</button></td>
					<td><button class="fee-key">20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T</button></td>
				</tr>
			</table>
		</td>
		<td>	
			<table id="TaxKeys" border="1" align=center>
				<tr>
					<td><button class="tax-key">Tax1</button></td>
					<td><button class="tax-key">Tax2</button></td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>
			<table id="CommandKeys" border="1" align=center>
				<tr>
					<td><button class="command-key">Coupon</button></td>
					<td><button class="command-key"style="background-color:yellow">Entered&nbsp;Itm<br>Quantity<br>QTY</button></td>
				</tr>
				<tr>
					<td><button class="command-key">Account<br>Receive</button></td>
					<td><button class="command-key">Account<br>Pay&nbsp;Out</button></td>
				</tr>
				<tr>
					<td><button class="command-key">Alternate<br>PLU<br>Price</button></td>
					<td><button class="command-key">PLU</button></td>
				</tr>
				<tr>
					<td><button class="command-key white-bg" onClick="PressKey('Clear')">Clear</button></td>
					<td><button class="command-key white-bg">Void</button></td>
				</tr>
			</table>
		</td>
		<td>
			<table id="NumberKeys" border="1" cellspacing="15"align=center>
				<tr>
					<td><button class="number-key" onClick="PressKey('7')">7</button></td>
					<td><button class="number-key" onClick="PressKey('8')">8</button></td>
					<td><button class="number-key" onClick="PressKey('9')">9</button></td>
				</tr>
				<tr>
					<td><button class="number-key" onClick="PressKey('4')">4</button></td>
					<td><button class="number-key" onClick="PressKey('5')">5</button></td>
					<td><button class="number-key" onClick="PressKey('6')">6</button></td>
				</tr>
				<tr>
					<td><button class="number-key" onClick="PressKey('1')">1</button></td>
					<td><button class="number-key" onClick="PressKey('2')">2</button></td>
					<td><button class="number-key" onClick="PressKey('3')">3</button></td>
				</tr>
				<tr>
					<td><button class="number-key" onClick="PressKey('0')">0</button></td>
					<td><button class="number-key" onClick="PressKey('00')">00</button></td>
					<td></td>
				</tr>
			</table>
		</td>
		<td>
			<table id="DepartmentKeys" border="1" align=center>
				<tr>
					<td><button class="dept-key" onClick="PressKey('PASSPORT','4')">4&nbsp;&nbsp;&nbsp;&nbsp;D/X<br>Set&nbsp;of&nbsp;2<br>Passport<br>Photos</button></td>
					<td><button class="dept-key" onClick="PressKey('DVD AUTHOR','9')">9&nbsp;&nbsp;&nbsp;&nbsp;I<br>DVD<br>Authorin</button></td>
					<td><button class="dept-key" onClick="PressKey('COFFEE','14')">14&nbsp;&nbsp;&nbsp;&nbsp;N<br>COFFEE</button></td>
					<td><button class="dept-key">19&nbsp;&nbsp;&nbsp;&nbsp;S</button></td>
				</tr>
				<tr>
					<td><button class="dept-key" onClick="PressKey('12&quot;LAMINA','2')">
							<table id="twelve-inch-laminate-button">
								<tr>
									<td class="header" style="font-size:10px">3&nbsp;&nbsp;&nbsp;&nbsp;C/W</td>
								</tr>
								<tr>
									<td class="blue-label" style="background-color:blue;font-size:10px">12"<br>Laminate</td>
								</tr>
							</table>
						</button>
					</td>
					<td><button class="dept-key" onClick="PressKey('DVD DUPLIC','8')">8&nbsp;&nbsp;&nbsp;&nbsp;H<br>DVD<br>Duplicat.</button></td>
					<td><button class="dept-key" onClick="PressKey('DVD MENU','13')">13&nbsp;&nbsp;&nbsp;&nbsp;M<br>DVD<br>Menu</button></td>
					<td><button class="dept-key">18&nbsp;&nbsp;&nbsp;&nbsp;R</button></td>
				</tr>
				<tr>
					<td><button class="dept-key" onClick="PressKey('26&quot;LAMINA','3')">
							<table id="twenty-six-inch-laminate-button">
								<tr>
									<td class="header" style="font-size:10px">2&nbsp;&nbsp;&nbsp;&nbsp;B/V</td>
								</tr>
								<tr>
									<td class="blue-label" style="background-color:blue;font-size:10px">26"<br>Laminate</td>
								</tr>
							</table>
						</button>
					</td>
					<td><button class="dept-key" onClick="PressKey('CD DUPLICA','7')">7&nbsp;&nbsp;&nbsp;&nbsp;G<br>CD<br>Duplicat.</button></td>
					<td><button class="dept-key" onClick="PressKey('POWERTABS','12')">12&nbsp;&nbsp;&nbsp;&nbsp;L<br>Power<br>Tabs<br>(Grommets)</button></td>
					<td><button class="dept-key">17&nbsp;&nbsp;&nbsp;&nbsp;Q</button></td>
				</tr>
				<tr>
					<td>
						<button class="dept-key" onClick="PressKey('PRINTING','1')">
							<table id="large-format-printing-button">
								<tr>
									<td class="header" style="font-size:10px">1&nbsp;&nbsp;&nbsp;&nbsp;A/U</td>
								</tr>
								<tr>
									<td class="green-label" style="background-color:green;font-size:10px;color=white;">Lrg&nbsp;Fmt.<br>Printing<br>(Price)</td>
								</tr>
							</table>
						</button>
					</td>
					<td>
						<button class="dept-key" onClick="PressKey('LATE FEE','6')">
							<table id="late_fee_button">
								<tr>
									<td class="header" style="font-size:10px">6&nbsp;&nbsp;&nbsp;&nbsp;F/Z</td>
								</tr>
								<tr>
									<td class="green-label" style="background-color:green;font-size:10px;color=white;">Late<br>Fee</td>
								</tr>
							</table>
						</button>
					</td>
					<td>
						<button class="dept-key" onClick="PressKey('USAGE FEES','11')">
							<table id="usage_fee_button">
								<tr>
									<td class="header" style="font-size:10px">11&nbsp;&nbsp;&nbsp;&nbsp;K</td>
								</tr>
								<tr>
									<td class="green-label" style="background-color:green;font-size:10px;color=white;">Usage<br>Fee</td>
								</tr>
							</table>
						</button>
					</td>
					<td><button class="dept-key">16&nbsp;&nbsp;&nbsp;&nbsp;P</button></td>
				</tr>
			</table>
		</td>
		<td>
			<table id="PaymentKeys" border="1" align=center>
				<tr>
					<td><button class="payment-key">Non-tax</button></td>
					<td><button class="payment-key" style="background-color:red;color:white" onClick="PressKey('PIN/CHECK')">PIN<hr>CHECK</button></td>
				</tr>
				<tr>
					<td><button class="payment-key">Return</button></td>
					<td><button class="payment-key">Charge</button></td>
				</tr>
				<tr>
					<td><button class="payment-key" style="background-color:red;color:white">Sub<br>total</button></td>
					<td><button class="payment-key">Items<br>Subtotal<br>No&nbsp;Sale</button></td>
				</tr>
				<tr>
					<td colspan="2"><button class="total-key" onclick="javascript:play_single_sound();">Amount&nbsp;Tend&nbsp;Total<br>PAY&nbsp;CASH</button></td>
				</tr>
			</table>
		</td>
	</tr>
</table>
</body>
</html>
